; PlatformIO Project Configuration (cleaned)
; Centralized common settings under [env] and a single explicit env for
; the development board used in this project. Keep this file minimal and
; explicit to make builds reproducible.

[platformio]
default_envs = az-delivery-devkit-v4

[env]
monitor_speed = 115200

; Common library dependencies
lib_deps =
    SignalK/SensESP@^3.1.1


; Common build flags (applied to all envs unless overridden)
build_flags =
    -D CORE_DEBUG_LEVEL=ARDUHAL_LOG_LEVEL_VERBOSE
    -D USE_ESP_IDF_LOG
    -Wno-deprecated-declarations

; Avoid treating reorder warnings as errors and enable the ESP32 exception decoder
build_unflags =
    -Werror=reorder
monitor_filters = esp32_exception_decoder

board_build.partitions = min_spiffs.csv

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Environment for MH ET LIVE ESP32MiniKit
[env:mhetesp32minikit]
platform = espressif32@^6.9.0
framework = arduino
board = mhetesp32minikit
upload_protocol = esptool

; Reuse the common lib_deps and build_flags (explicit duplication avoided)
lib_deps =
    ${env.lib_deps}

build_flags =
    ${env.build_flags}
    -D TAG='"Arduino"'
    -Wno-deprecated-declarations

; If you need platform-specific dependencies (e.g. esp_websocket_client for
; ESP-IDF), add a separate env instead of bloating the general env.

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Environment for AZ-Delivery ESP-32 Dev Kit C V4
[env:az-delivery-devkit-v4]
platform = espressif32@^6.9.0
framework = arduino
board = az-delivery-devkit-v4
upload_protocol = esptool

; Reuse the common lib_deps and build_flags (explicit duplication avoided)
lib_deps =
    ${env.lib_deps}

build_flags =
    ${env.build_flags}
    -D TAG='"Arduino"'
    -Wno-deprecated-declarations

